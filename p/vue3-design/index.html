<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=generator content="Hugo 0.74.3"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/remixicon/remixicon.css><link rel=stylesheet href=/css/tony.min.2cd909c3b2b4f0eb1f6b8dbe02a8be4ed8a7456895a39f284818ed1e771073c6.css integrity="sha256-LNkJw7K08Osfa42+Aqi+TtinRWiVo58oSBjtHncQc8Y="><link rel="shortcut icon" href=/favicon.png type=image/x-icon><title>Vue3的改变有哪些？</title><meta name=author content="Ray"><meta name=description content="Ray's Blog"><link rel=preconnect href=https://www.google-analytics.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-157970228-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-157970228-1');</script><link rel=canonical href=https://raycoder.me/p/vue3-design/></head><header id=header-div class=tony-header-fixed><div class=header-div1><a href=https://raycoder.me/ style=display:inline-block><img src=/favicon.png></a></div><div class=header-div2><a href=/archives/><button class="btn btn-light">归档</button></a>
<a href=https://mirror.raycoder.me/><button class="btn btn-light">记录</button></a>
<a href=/links/><button class="btn btn-light">后♂宫</button></a>
<a href=/messages/><button class="btn btn-light">留言板</button></a>
<a href=/shuoshuo/><button class="btn btn-light">说说</button></a>
<a href=/about/><button class="btn btn-light">关于</button></a></div></header><body><div id=post-container><div class="grid grid-centered"><div id=grid-cell class=grid-cell><div class=single-left><div class=index-div><div class=single-index><h4><i class=ri-list-check-2></i>文章引索</h4></div><ul id=article-index class=index-ul><a href=#%e5%92%95%e4%ba%86%e8%bf%99%e4%b9%88%e4%b9%85%e6%88%91%e5%b9%b2%e4%ba%86%e4%bb%80%e4%b9%88><li style=padding-left:23px><i class=ri-checkbox-blank-circle-line></i>&nbsp;&nbsp;咕了这么久，我干了什么？</li></a><a href=#%e5%ad%a6-%e4%ba%86-%e4%bb%80-%e4%b9%88%e6%b4%bb-%e5%88%b0-%e8%80%81-%e5%ad%a6-%e5%88%b0-%e8%80%81><li style=padding-left:23px><i class=ri-checkbox-blank-circle-line></i>&nbsp;&nbsp;学 了 什 么（活 到 老 学 到 老）</li></a><a href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e5%85%b3%e6%b3%a8vue3><li style=padding-left:23px><i class=ri-checkbox-blank-circle-line></i>&nbsp;&nbsp;为什么关注Vue3？</li></a><a href=#%e6%ad%a3%e6%96%87%e5%bc%80%e5%a7%8b><li style=padding-left:23px><i class=ri-checkbox-blank-circle-line></i>&nbsp;&nbsp;正文开始</li></a><a href=#vue3%e9%87%8d%e5%86%99%e5%8e%9f%e5%9b%a0><li style=padding-left:23px><i class=ri-checkbox-blank-circle-line></i>&nbsp;&nbsp;Vue3重写原因？</li></a></ul></div><div><div class=index-div-prev><h4>上一篇</h4><p><a href=/p/python-import-this/ rel=next>Python Import This源码剖析</a></p></div></div></div><div id=reading-bar></div><article class="article reveal"><div id=load><div class=article-header><span class="badge badge-pill badge-danger single-badge"><a href=https://raycoder.me/categories/%E5%89%8D%E7%AB%AF class=post-header>前端</a></span>
<span class="badge badge-pill badge-danger single-badge"><a href=https://raycoder.me/categories/vue class=post-header>Vue</a></span>
<span title=预计阅读时长 class="badge badge-pill badge-danger single-badge post-header">2 mins</span><h2 class=single-h2>Vue3的改变有哪些？</h2><div class=article-list-footer><span class=article-list-date>19-07-20</span>
<span class=article-list-divider>/</span>
<span class=article-list-minutes>839 Words</span></div><div class=single-line></div></div><div class=article-content><blockquote><p><strong>写作不易，资瓷一下呗！本文首发于个人博客：<a href=https://raycoder.me>https://raycoder.me</a></strong></p></blockquote><h3 id=咕了这么久我干了什么>咕了这么久，我干了什么？</h3><p>呼，俺前些天在准备<strong>期末考试</strong>，终于放假了~~~😍😍😍🎉🎉🎉可以更新一下博客了！</p><h3 id=学-了-什-么活-到-老-学-到-老>学 了 什 么（活 到 老 学 到 老）</h3><p>哦，<code>JS</code>、<code>Vue</code>和<code>React</code>。</p><h3 id=为什么关注vue3>为什么关注<code>Vue3</code>？</h3><p>不巧的是，我刚刚掌握<code>Vue2</code>的时候，<code>Vue3.0</code>RC🤢🤔</p><h3 id=正文开始>正文开始</h3><p>（<code>Vue3</code>英文文档：<a href=https://v3.vuejs.org>https://v3.vuejs.org</a>）</p><h4 id=vue3重写原因>Vue3重写原因？</h4><ul><li><p><code>Tree shaking support</code>：可以将无用模块“剪辑”，仅打包需要的。</p></li><li><p><code>Composition API</code>：组合<code>API</code></p></li><li><p><code>Better TypeScript support</code>：更优秀的Ts支持</p></li><li><p>更好的<code>Virtual DOM Diff算法</code></p></li><li><p>代码的<code>聚集性</code></p></li></ul><h5 id=composition-api组合api><code>Composition API</code>：组合<code>API</code></h5><p>在<code>Vue 2.x</code>中，浏览器端和<code>webpack</code>都可以使用一个Vue对象（<code>import Vue from "vue"</code>）。</p><p>而在<code>Vue3</code>中（<code>webpack</code>环境），你可以通过从Vue中导入所需功能来使用，有助于减小代码体积）</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue>&lt;<span style=color:#f92672>template</span>&gt;
  &lt;<span style=color:#f92672>button</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;increment&#34;</span>&gt;
    <span style=color:#a6e22e>Count</span> <span style=color:#a6e22e>is</span><span style=color:#f92672>:</span> {{ <span style=color:#a6e22e>state.count</span> }}<span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>double</span> <span style=color:#a6e22e>is</span><span style=color:#f92672>:</span> {{ <span style=color:#a6e22e>state.double</span> }}
  &lt;/<span style=color:#f92672>button</span>&gt;
&lt;/<span style=color:#f92672>template</span>&gt;

&lt;<span style=color:#f92672>script</span>&gt;
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>reactive</span>, <span style=color:#a6e22e>computed</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> {
  <span style=color:#a6e22e>setup</span>() {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>reactive</span>({
      <span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
      <span style=color:#66d9ef>double</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>computed</span>(() =&gt; <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>count</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>)
    })

    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>increment</span>() {
      <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>count</span><span style=color:#f92672>++</span>
    }

    <span style=color:#66d9ef>return</span> {
      <span style=color:#a6e22e>state</span>,
      <span style=color:#a6e22e>increment</span>
    }
  }
}
&lt;/<span style=color:#f92672>script</span>&gt;
</code></pre></div><p>参阅：<a href=https://composition-api.vuejs.org/>https://composition-api.vuejs.org/</a></p><h5 id=代码的聚集性>代码的<code>聚集性</code></h5><p>使用组件时，一个HTML节点可能会与多个选项相关：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue>&lt;<span style=color:#f92672>template</span>&gt;
	&lt;<span style=color:#f92672>input</span> <span style=color:#f92672>v-model</span><span style=color:#e6db74>=&#34;inputVal&#34; @blur=&#34;handleBlur&#34; </span><span style=color:#f92672>:style</span><span style=color:#e6db74>=&#34;inputStyle&#34;</span>&gt;&lt;/<span style=color:#f92672>input</span>&gt;
&lt;/<span style=color:#f92672>template</span>&gt;

&lt;<span style=color:#f92672>script</span>&gt;
    <span style=color:#a6e22e>prefixCls</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`test-input`</span>
    <span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> {
        <span style=color:#a6e22e>data</span> () {
            <span style=color:#66d9ef>return</span> {
                <span style=color:#a6e22e>inputVal</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>,
                <span style=color:#a6e22e>prefixCls</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>prefixCls</span>
                <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>            }
        },
        <span style=color:#a6e22e>methods</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>handleBlur</span> () {
                <span style=color:#75715e>// Handle Blur
</span><span style=color:#75715e></span>            }
            <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>        },
        <span style=color:#a6e22e>computed</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>inputStyle</span> () {
                <span style=color:#66d9ef>return</span> [<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>prefixCls</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>]
            },
            <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>        },
        <span style=color:#a6e22e>watch</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>inputVal</span> () {
                <span style=color:#a6e22e>handleInput</span>()
            },
            <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>        },
        <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>    }
&lt;/<span style=color:#f92672>script</span>&gt;

&lt;<span style=color:#f92672>style</span>&gt;...&lt;/<span style=color:#f92672>style</span>&gt;
</code></pre></div><p>如是，一个<code>input</code>的代码被分散到了许多选项中：<code>data</code>，<code>methods</code>，<code>computed</code>，<code>watch</code>，如Vue官方图：</p><p align=center><img src=https://gitee.com/RACD/cdn/raw/master/imgs/20200719190119.png style=width:131px></p><p>Vue官方示例如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>useCreateFolder</span> (<span style=color:#a6e22e>openFolder</span>) {
  <span style=color:#75715e>// originally data properties
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>showNewFolder</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>(<span style=color:#66d9ef>false</span>)
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newFolderName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>(<span style=color:#e6db74>&#39;&#39;</span>)

  <span style=color:#75715e>// originally computed property
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newFolderValid</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; <span style=color:#a6e22e>isValidMultiName</span>(<span style=color:#a6e22e>newFolderName</span>.<span style=color:#a6e22e>value</span>))

  <span style=color:#75715e>// originally a method
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createFolder</span> () {
    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>newFolderValid</span>.<span style=color:#a6e22e>value</span>) <span style=color:#66d9ef>return</span>
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>mutate</span>({
      <span style=color:#a6e22e>mutation</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>FOLDER_CREATE</span>,
      <span style=color:#a6e22e>variables</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>newFolderName</span>.<span style=color:#a6e22e>value</span>
      }
    })
    <span style=color:#a6e22e>openFolder</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>folderCreate</span>.<span style=color:#a6e22e>path</span>)
    <span style=color:#a6e22e>newFolderName</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
    <span style=color:#a6e22e>showNewFolder</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
  }

  <span style=color:#66d9ef>return</span> {
    <span style=color:#a6e22e>showNewFolder</span>,
    <span style=color:#a6e22e>newFolderName</span>,
    <span style=color:#a6e22e>newFolderValid</span>,
    <span style=color:#a6e22e>createFolder</span>
  }
}
</code></pre></div><p><img src=https://gitee.com/RACD/cdn/raw/master/imgs/20200719191506.png alt></p><hr><p>Q.是不是<code>Vue3</code>就不能使用选项API了？</p><p>A.可以用，这是两个并存的API。</p><p>推荐视频：<a href="https://www.bilibili.com/video/BV1ke411W7WB/?spm_id_from=333.788.videocard.6">https://www.bilibili.com/video/BV1ke411W7WB/?spm_id_from=333.788.videocard.6</a></p></div><div style="text-align:left;margin:60px 0 40px 8px;border-radius:6px"><ul class=post_tags style="margin:0;padding:0 0 15px;width:100%"><li class=cat-real style=display:inline-block;color:#666;font-size:1.1rem;font-weight:600;margin:0;letter-spacing:1px><a style="background-color:#e7f3ff;color:#2f94fe;padding:1px 12px;border-radius:4px;font-size:.9rem">文章标签</a></li><li class=cat-real style=display:inline-block><a href=https://raycoder.me/tags/%E5%89%8D%E7%AB%AF/ style="font-size:.9rem;border-radius:4px;padding:1px 12px">前端</a></li><li class=cat-real style=display:inline-block><a href=https://raycoder.me/tags/vue/ style="font-size:.9rem;border-radius:4px;padding:1px 12px">Vue</a></li><li class=cat-real style=display:inline-block><a href=https://raycoder.me/tags/vue3/ style="font-size:.9rem;border-radius:4px;padding:1px 12px">Vue3</a></li></ul></div><div id=article-comments class=article-comments style=margin-top:50px><div id=waline></div><script src=//cdn.jsdelivr.net/npm/@waline/client></script><script>Waline({el:'#waline',serverURL:'https:\/\/rwl.vercel.app',});</script></div></div></div></div></div></div></body><div><a href=https://github.com/so1ve/ target=_blank style=text-decoration:none><div class="goup-container footer-github"><i class="ri-github-fill footer-github-icon"></i></div></a><div class="footer reveal"><p>Copyright&nbsp;<i class=ri-copyright-line></i>&nbsp;·&nbsp;2021&nbsp;·&nbsp;Ray&nbsp;·&nbsp;
<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank style=text-decoration:none;color:inherit;font-size:14px;font-weight:500>CC BY-NC 4.0</a></p><p>Powered by <a href=https://github.com/gohugoio/hugo>Hugo</a> | Theme is <a href=https://github.com/ThemeTony/hugo-theme-tony>Tony</a></p></div></div><script src=/js/jquery.min.js></script><script src=/js/tony.min.21fb28b08edccb7a220a2a53f8fa67ba2f62588d04437e5a3998769b79537006.js integrity="sha256-IfsosI7cy3oiCipT+Ppnui9iWI0EQ35aOZh2m3lTcAY="></script><script src=/js/medium-zoom.min.js></script><script>mediumZoom(document.querySelectorAll('div.article-content img'),{background:'#fff'});</script><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}
else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script></html>